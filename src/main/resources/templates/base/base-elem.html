<head th:fragment="head-padrao">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/geral.css">
    <link rel="stylesheet" href="/css/menu.css">
    <link rel="stylesheet" href="/css/denuncia.css">
    <link rel="stylesheet" href="/css/mensagens.css">
    <title>EcoGuardian</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
</head>

<div th:fragment="script-padrao">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
        function formatarCPF(input) {
            var cpf = input.value.replace(/\D/g, '');

            if (cpf.length >= 3 && cpf.length <= 6) {
                cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2');
            } else if (cpf.length >= 7 && cpf.length <= 9) {
                cpf = cpf.replace(/(\d{3})(\d{3})(\d)/, '$1.$2.$3');
            } else if (cpf.length >= 10) {
                cpf = cpf.replace(/(\d{3})(\d{3})(\d{3})(\d)/, '$1.$2.$3-$4');
            }

            input.value = cpf;
        }

        let cpfInputs = document.getElementsByClassName("cpf");
        for (let i = 0; i < cpfInputs.length; i++) {
            cpfInputs[i].setAttribute("maxlength", "14");
        }

        //Obter municipios
        $(document).ready(function () {
            $('#estado').change(function () {
                var estadoId = $(this).val();
                // Fazer chamada AJAX
                $.get('/municipios/daUF/' + estadoId, function (data) {
                    // Limpar e preencher o dropdown de municípios
                    var municipioDropdown = $('#idIBGE');
                    municipioDropdown.empty();
                    console.log(data)
                    $.each(data, function (index, municipio) {
                        municipioDropdown.append('<option value="' + municipio.idIBGE + '">' + municipio.nome + '</option>');
                    });
                });
            });
        });

        // funcao para add icons automaticamente
        function adicionarIconeAosBotoes(classeBtn, classeIcon) {
            let botoes = document.querySelectorAll(classeBtn);
            botoes.forEach(function(botao) {
                let icone = document.createElement("i");
                icone.className = classeIcon;
                botao.appendChild(icone);
            });
        }

        // Momento que a tela é carregada e é acrescido esses icons
        document.addEventListener('DOMContentLoaded', function () {
            adicionarIconeAosBotoes('salvar-btn', 'bi bi-floppy-fill');
            adicionarIconeAosBotoes('novo-btn', 'bi bi-file-earmark-plus');
        });

    </script>
</div>

<div th:fragment="hello-criar-conta">
    <h2>deu certo, agora aqui</h2>
</div>